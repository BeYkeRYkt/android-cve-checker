From e508bde8a248f15ec8807db2e6d2cbcb2402f83c Mon Sep 17 00:00:00 2001
From: Wei Li <sirius.liwei@huawei.com>
Date: Thu, 31 Aug 2017 14:20:08 -0400
Subject: [PATCH] angler: remove 'reboot edl' interface for security.

BUG: 63100473

Change-Id: If6cb5ce50524d34b30f09a22eeb76d2cd3a0e834
---
 drivers/power/reset/msm-poweroff.c | 4 ++++
 1 file changed, 4 insertions(+)
 mode change 100755 => 100644 drivers/power/reset/msm-poweroff.c

diff --git a/drivers/power/reset/msm-poweroff.c b/drivers/power/reset/msm-poweroff.c
old mode 100755
new mode 100644
index 390855c4c8047..c69d7c6a13605
--- a/drivers/power/reset/msm-poweroff.c
+++ b/drivers/power/reset/msm-poweroff.c
@@ -128,6 +128,7 @@ static bool get_dload_mode(void)
 	return dload_mode_enabled;
 }
 
+#if 0
 static void enable_emergency_dload_mode(void)
 {
 	int ret;
@@ -157,6 +158,7 @@ static void enable_emergency_dload_mode(void)
 	if (ret)
 		pr_err("Failed to set secure EDLOAD mode: %d\n", ret);
 }
+#endif
 
 static int dload_set(const char *val, struct kernel_param *kp)
 {
@@ -317,8 +319,10 @@ static void msm_restart_prepare(const char *cmd)
 			if (!ret)
 				__raw_writel(0x6f656d00 | (code & 0xff),
 					     restart_reason);
+#if 0
 		} else if (!strncmp(cmd, "edl", 3)) {
 			enable_emergency_dload_mode();
+#endif
 		} else {
 			__raw_writel(0x77665501, restart_reason);
 		}
