From 8d16038232db0f8b765fa99e6dbc6867052b0806 Mon Sep 17 00:00:00 2001
From: Tanvi Aggarwal <tanvia@codeaurora.org>
Date: Wed, 2 Aug 2017 11:20:36 +0530
Subject: [PATCH] msm: sensor: ois: add conditional check for ioctl

Add conditional check when sending VIDIOC_MSM_OIS_CFG.

Bug: 38258851
Change-Id: I095418b47409f5291e5c3fcfd227897022f77f71
CRs-Fixed:2078155
Signed-off-by: Tanvi Aggarwal <tanvia@codeaurora.org>
---
 drivers/media/platform/msm/camera_v2/sensor/ois/msm_ois.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/media/platform/msm/camera_v2/sensor/ois/msm_ois.c b/drivers/media/platform/msm/camera_v2/sensor/ois/msm_ois.c
index 3ee1412bbcf42..9b4bed8978dba 100644
--- a/drivers/media/platform/msm/camera_v2/sensor/ois/msm_ois.c
+++ b/drivers/media/platform/msm/camera_v2/sensor/ois/msm_ois.c
@@ -1158,6 +1158,10 @@ static long msm_ois_subdev_do_ioctl(
 			parg = &ois_data;
 			break;
 		}
+		break;
+	case VIDIOC_MSM_OIS_CFG:
+		pr_err("%s: invalid cmd 0x%x received\n", __func__, cmd);
+		return -EINVAL;
 	}
 	rc = msm_ois_subdev_ioctl(sd, cmd, parg);
 
