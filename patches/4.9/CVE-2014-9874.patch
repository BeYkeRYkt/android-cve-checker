From 6b7b66961934660a91fb035e6e4223689a2500da Mon Sep 17 00:00:00 2001
From: Masaki Sato <ams087@motorola.com>
Date: Fri, 18 Apr 2014 13:23:17 -0500
Subject: [PATCH] Revert "(CR): Asoc:msm:Added Buffer overflow check"

This change was only meant for A-family and causes EVRC encoder
buffer allocation failure on B-family.

This reverts commit fdd50cb69df64e8eef0933c9ee9bccb1eeae69ca.

Change-Id: I2ce76602ef396a2939de05626c43ad4e87737418
Signed-off-by: Masaki Sato <ams087@motorola.com>
Reviewed-on: http://gerrit.mot.com/629216
Submit-Approved: Jira Key <jirakey@motorola.com>
Tested-by: Jira Key <jirakey@motorola.com>
SLTApproved: Slta Waiver <sltawvr@motorola.com>
Reviewed-by: Jeffrey Carlyle <jeff.carlyle@motorola.com>
Reviewed-by: Sriram Divakar <sriramhd@motorola.com>
Reviewed-by: Yin-Jun Chen <a7301c@motorola.com>
---
 sound/soc/msm/qdsp6v2/q6asm.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/sound/soc/msm/qdsp6v2/q6asm.c b/sound/soc/msm/qdsp6v2/q6asm.c
index e09af8b48ba..77736150a60 100644
--- a/sound/soc/msm/qdsp6v2/q6asm.c
+++ b/sound/soc/msm/qdsp6v2/q6asm.c
@@ -46,7 +46,6 @@
 
 #define TRUE        0x01
 #define FALSE       0x00
-#define FRAME_NUM             (8)
 
 /* TODO, combine them together */
 static DEFINE_MUTEX(session_lock);
@@ -924,8 +923,6 @@ int q6asm_audio_client_buf_alloc(unsigned int dir,
 			pr_debug("%s: buffer already allocated\n", __func__);
 			return 0;
 		}
-		if (bufcnt != FRAME_NUM)
-			goto fail;
 		mutex_lock(&ac->cmd_lock);
 		buf = kzalloc(((sizeof(struct audio_buffer))*bufcnt),
 				GFP_KERNEL);
